// Copyright (c) 2016, Open DICOMweb Project. All rights reserved.
// Use of this source code is governed by the open source license
// that can be found in the LICENSE file.
// Author: Jim Philbin <jfphilbin@gmail.edu> -
// See the AUTHORS file for other contributors.

import 'dart:io';

import 'package:dictionary/src/tag/p_tag.dart';
import 'package:dictionary/src/tag/tag_map.dart';

const String outputDir = "C:/odw/sdk/dictionary/tool/tag/gen/output";
const String codeMapPath = outputDir + '/p_tag_codes.dart';
const String keywordMapPath = outputDir + '/p_tag_keywords.dart';

void main(List<String> args) {
  String s;
  File tagCodeFile = new File(codeMapPath);
  s = generateCodeMap(tagMap);
  //print(s);
  tagCodeFile.writeAsStringSync(s);

  File tagKeywordFile = new File(keywordMapPath);
  s = generateKeywordMap(tagMap);
  //print(s);
  tagKeywordFile.writeAsStringSync(s);
}

String generateCodeMap(Map<int, PTag> map) {
  var s = '''
// Copyright (c) 2016, Open DICOMweb Project. All rights reserved.
// Use of this source code is governed by the open source license
// that can be found in the LICENSE file.
// Author: Jim Philbin <jfphilbin@gmail.edu> -
// See the AUTHORS file for other contributors.

import 'package:dictionary/src/tag/p_tag.dart';

// *** This file generated by 'generate_public_tag_map.dart' ***
// ----------------------------------------------------------

// Ordered List of all DICOM attributes
  const Map<int, Tag> publicTagCodeMap = const {\n''';
  map.values.forEach((PTag tag) {
    s += '  ${tag.hex}: Tag.k${tag.keyword},\n';
  });
  return s += '};\n';
}

String generateKeywordMap(Map<int, PTag> map) {
  var s = '''
// Copyright (c) 2016, Open DICOMweb Project. All rights reserved.
// Use of this source code is governed by the open source license
// that can be found in the LICENSE file.
// Author: Jim Philbin <jfphilbin@gmail.edu> -
// See the AUTHORS file for other contributors.

import 'package:dictionary/src/tag/p_tag.dart';

// *** This file generated by 'generate_public_tag_map.dart' ***
// ----------------------------------------------------------

// Ordered List of all DICOM attributes
  const Map<int, Tag> publicTagKeywordMap = const {\n''';
  map.values.forEach((PTag tag) {
    s += '  "${tag.keyword}": Tag.k${tag.keyword},\n';
  });
  return s += '};\n';
}
